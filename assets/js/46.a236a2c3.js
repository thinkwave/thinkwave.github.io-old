(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{528:function(a,s,e){"use strict";e.r(s);var n=e(4),t=Object(n.a)({},(function(){var a=this,s=a.$createElement,e=a._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("p",[a._v("JPA(Java Persistence API)는 자바 진영의 ORM 기술 표준")]),a._v(" "),e("blockquote",[e("p",[a._v("ORM(Object Relational Mapping) 자바 객체를 데이터베이스 객체로 맵핑하여 SQL을 자동 생성")])]),a._v(" "),e("h2",{attrs:{id:"jpa-장점"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#jpa-장점"}},[a._v("#")]),a._v(" JPA 장점")]),a._v(" "),e("p",[a._v("쿼리 중심의 SQL 개발에서 객체 중심 개발로 패러다임 전환")]),a._v(" "),e("blockquote",[e("p",[a._v("상속등의 객체지향과 연관 중심의 관계형 데이터베이스 다른 패러다임으로 문제 발생")])]),a._v(" "),e("h2",{attrs:{id:"hibernate"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#hibernate"}},[a._v("#")]),a._v(" Hibernate")]),a._v(" "),e("p",[a._v("JPA는 "),e("code",[a._v("Java Persistence")]),a._v("의 표준 명세로 실제 구현체는 Hibernate, EclipseLink 등이 있으며, "),e("code",[a._v("Hibernate")]),a._v("가 사실상 표준으로 인정 됨")]),a._v(" "),e("blockquote",[e("p",[e("code",[a._v("de facto")])])]),a._v(" "),e("h2",{attrs:{id:"연관관계-맵핑"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#연관관계-맵핑"}},[a._v("#")]),a._v(" 연관관계 맵핑")]),a._v(" "),e("h3",{attrs:{id:"다중성"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#다중성"}},[a._v("#")]),a._v(" 다중성")]),a._v(" "),e("ol",[e("li",[e("p",[a._v("@ManyToOne")])]),a._v(" "),e("li",[e("p",[a._v("@OneToMany")])]),a._v(" "),e("li",[e("p",[a._v("@OneToOne")])]),a._v(" "),e("li",[e("p",[a._v("@ManyToMany")])])]),a._v(" "),e("h3",{attrs:{id:"단방향-양방향"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#단방향-양방향"}},[a._v("#")]),a._v(" 단방향, 양방향")]),a._v(" "),e("p",[e("code",[a._v("테이블")]),a._v("은 fk로 테이블이 연결되기 때문에 연결관계의 방향이라는 개념이 없음")]),a._v(" "),e("p",[e("code",[a._v("객체")]),a._v("에서는 참조용 필드로 참조만 할수 있기 때문에 단방향. 두 객체가 서로 참조할려면 a->b, a<-b 로 상호간에 참조필드를 만들어야 함.")]),a._v(" "),e("h3",{attrs:{id:"mappedby"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#mappedby"}},[a._v("#")]),a._v(" mappedBy")]),a._v(" "),e("p",[e("code",[a._v("관계형데이터베이스")]),a._v("의 테이블에서는 관계의 주인이라는 개념 없이 fk로 연결됨.")]),a._v(" "),e("p",[e("code",[a._v("객체")]),a._v("에서는 양방향시 참조가 2군데서 일어나기 때문에 테이블의 fk를 관리할 곳을 지정해야 함.")]),a._v(" "),e("ol",[e("li",[a._v("주인(User)")])]),a._v(" "),e("ul",[e("li",[a._v("테이블 : fk가 있는곳이 주인")]),a._v(" "),e("li",[a._v("객체 : @JoinColumn")])]),a._v(" "),e("blockquote",[e("p",[a._v("User(n) <-> Dept(1), DB에서 User(n)가 fk를 보유하기 때문에 User가 연관관계의 주인")])]),a._v(" "),e("ol",{attrs:{start:"2"}},[e("li",[a._v("주인이 아닌 곳(Dept)")])]),a._v(" "),e("ul",[e("li",[a._v("테이블 :")]),a._v(" "),e("li",[a._v('객체 : @OneToMany(mappedBy="dept")')])]),a._v(" "),e("blockquote",[e("p",[a._v("User(n) <-> Dept(1)에서 주인이 아닌 Dept는 연관관계와의 연결을 mappedBy로 지정")])]),a._v(" "),e("blockquote",[e("p",[e("code",[a._v("mappedBy")]),a._v("로 객체에서 양방향시 관계의 주인을 지정하며, "),e("code",[a._v("관계형데이터베이스")]),a._v("에서 fk를 관리하는 곳\nUser(n) <-> Dept(1) : User는 주인, Dept는 관계의 주인이 아니며 mappedBy로 연관관계의 주인을 지정.")])]),a._v(" "),e("h2",{attrs:{id:"entity"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#entity"}},[a._v("#")]),a._v(" Entity")]),a._v(" "),e("p",[a._v("JPA로 데이터베이스 테이블과 맵핑 되는 클래스")]),a._v(" "),e("h3",{attrs:{id:"entity-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#entity-2"}},[a._v("#")]),a._v(" @Entity")]),a._v(" "),e("p",[a._v("JPA에서 테이블과 맵핑되는 객체")]),a._v(" "),e("h3",{attrs:{id:"table"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#table"}},[a._v("#")]),a._v(" @Table")]),a._v(" "),e("p",[a._v("데이터베이스 테이블 이름")]),a._v(" "),e("h3",{attrs:{id:"id"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#id"}},[a._v("#")]),a._v(" @Id")]),a._v(" "),e("p",[a._v("데이터베이스 테이블의 기본키(pk)")]),a._v(" "),e("h3",{attrs:{id:"column"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#column"}},[a._v("#")]),a._v(" @Column")]),a._v(" "),e("p",[a._v("자바 필드와 데이터베이스의 칼럼 맵핑")]),a._v(" "),e("h3",{attrs:{id:"joincolumn"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#joincolumn"}},[a._v("#")]),a._v(" @JoinColumn")]),a._v(" "),e("p",[a._v("외래키를 매핑할 때 사용")]),a._v(" "),e("h2",{attrs:{id:"단방향-연관관계-샘플"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#단방향-연관관계-샘플"}},[a._v("#")]),a._v(" 단방향 연관관계 샘플")]),a._v(" "),e("p",[a._v("N:1로 다대일로 연관관계를 매핑합니다.\nUser(n) : Dept(1) 로 User 엔티티에 Dept를 필드로 가져 갑니다.")]),a._v(" "),e("p",[e("img",{attrs:{src:"/spring/2021-01-15/jpa_1.jpg",alt:"단방향"}})]),a._v(" "),e("h3",{attrs:{id:"dept"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#dept"}},[a._v("#")]),a._v(" Dept")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v('@Table(name="tbl_dept")\n@Entity\npublic class Dept {\n    @Id\n    @GeneratedValue(strategy=GenerationType.IDENTITY)\n    @Column(name="dept_id", updatable = false, nullable = false)\n    private Long id;\n\n    @Column(name = "dept_name")  \n    private String name;\n\n}\n')])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br"),e("span",{staticClass:"line-number"},[a._v("7")]),e("br"),e("span",{staticClass:"line-number"},[a._v("8")]),e("br"),e("span",{staticClass:"line-number"},[a._v("9")]),e("br"),e("span",{staticClass:"line-number"},[a._v("10")]),e("br"),e("span",{staticClass:"line-number"},[a._v("11")]),e("br"),e("span",{staticClass:"line-number"},[a._v("12")]),e("br")])]),e("h3",{attrs:{id:"user"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#user"}},[a._v("#")]),a._v(" User")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v('@Table(name="tbl_user")\n@Entity\npublic class User {\n    @Id\n    @GeneratedValue\n    private Long id;\n\n    @Column(name = "user_name")  \n    private String name;\n\n    @ManyToOne\n    @JoinColumn(name="dept_id")\n    private Dept dept;\n}\n')])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br"),e("span",{staticClass:"line-number"},[a._v("7")]),e("br"),e("span",{staticClass:"line-number"},[a._v("8")]),e("br"),e("span",{staticClass:"line-number"},[a._v("9")]),e("br"),e("span",{staticClass:"line-number"},[a._v("10")]),e("br"),e("span",{staticClass:"line-number"},[a._v("11")]),e("br"),e("span",{staticClass:"line-number"},[a._v("12")]),e("br"),e("span",{staticClass:"line-number"},[a._v("13")]),e("br"),e("span",{staticClass:"line-number"},[a._v("14")]),e("br")])]),e("h2",{attrs:{id:"양방향-연관관계-샘플"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#양방향-연관관계-샘플"}},[a._v("#")]),a._v(" 양방향 연관관계 샘플")]),a._v(" "),e("p",[a._v("User와 Dept를 엔티티로 모델링 해 보자.")]),a._v(" "),e("p",[a._v("User(1)와 Dept(n)는 1:n의 관계이다.")]),a._v(" "),e("p",[e("img",{attrs:{src:"/spring/2021-01-15/jpa_2.jpg",alt:"양방향"}})]),a._v(" "),e("h3",{attrs:{id:"dept-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#dept-2"}},[a._v("#")]),a._v(" Dept")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v('@Table(name="tbl_dept")\n@Entity\npublic class Dept {\n    @Id\n    @GeneratedValue(strategy=GenerationType.IDENTITY)\n    @Column(name="dept_id", updatable = false, nullable = false)\n    private Long id;\n\n    @Column(name = "dept_name")  \n    private String name;\n\n    @OneToMany(mappedBy="dept")\n    private List<User> users = new ArrayList<User>();\n\n}\n')])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br"),e("span",{staticClass:"line-number"},[a._v("7")]),e("br"),e("span",{staticClass:"line-number"},[a._v("8")]),e("br"),e("span",{staticClass:"line-number"},[a._v("9")]),e("br"),e("span",{staticClass:"line-number"},[a._v("10")]),e("br"),e("span",{staticClass:"line-number"},[a._v("11")]),e("br"),e("span",{staticClass:"line-number"},[a._v("12")]),e("br"),e("span",{staticClass:"line-number"},[a._v("13")]),e("br"),e("span",{staticClass:"line-number"},[a._v("14")]),e("br"),e("span",{staticClass:"line-number"},[a._v("15")]),e("br")])]),e("h3",{attrs:{id:"user-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#user-2"}},[a._v("#")]),a._v(" User")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v('@Table(name="tbl_user")\n@Entity\npublic class User {\n    @Id\n    @GeneratedValue\n    private Long id;\n\n    @Column(name = "user_name")  \n    private String name;\n\n    @ManyToOne\n    @JoinColumn(name="dept_id")\n    private Dept dept;\n\n    public void changeDept(Dept dept) {\n        this.dept = dept;\n        dept.getUsers().add(this);\n    }\n}\n')])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br"),e("span",{staticClass:"line-number"},[a._v("7")]),e("br"),e("span",{staticClass:"line-number"},[a._v("8")]),e("br"),e("span",{staticClass:"line-number"},[a._v("9")]),e("br"),e("span",{staticClass:"line-number"},[a._v("10")]),e("br"),e("span",{staticClass:"line-number"},[a._v("11")]),e("br"),e("span",{staticClass:"line-number"},[a._v("12")]),e("br"),e("span",{staticClass:"line-number"},[a._v("13")]),e("br"),e("span",{staticClass:"line-number"},[a._v("14")]),e("br"),e("span",{staticClass:"line-number"},[a._v("15")]),e("br"),e("span",{staticClass:"line-number"},[a._v("16")]),e("br"),e("span",{staticClass:"line-number"},[a._v("17")]),e("br"),e("span",{staticClass:"line-number"},[a._v("18")]),e("br"),e("span",{staticClass:"line-number"},[a._v("19")]),e("br")])])])}),[],!1,null,null,null);s.default=t.exports}}]);